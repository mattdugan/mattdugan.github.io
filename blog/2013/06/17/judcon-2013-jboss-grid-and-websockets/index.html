
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JUDCon 2013: JBoss Data Grid and WebSockets - Matt Dugan</title>
  <meta name="author" content="Matt Dugan">

  
  <meta name="description" content="Delivering Real Time Push at Scale (Keeping an eye on the WWDC
announcements) It&rsquo;s good to see a Linux OS doing the presenting, though it
looks &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mattdugan.github.io/blog/2013/06/17/judcon-2013-jboss-grid-and-websockets">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Matt Dugan" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Matt Dugan</a></h1>
  
    <h2>Just a blog.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://duckduckgo.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mattdugan.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">JUDCon 2013: JBoss Data Grid and WebSockets</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-17T09:16:00-04:00" pubdate data-updated="true">Jun 17<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><h1>Delivering Real Time Push at Scale</h1>

<p><em>(Keeping an eye on the <a href="https://developer.apple.com/wwdc/">WWDC</a>
announcements)</em></p>

<p>It&rsquo;s good to see a Linux OS doing the presenting, though it
looks like Ubuntu, not RHEL?  Oh I see, hah! it&rsquo;s just a virtual
machine.</p>

<p><a href="http://blog.c2b2.co.uk">Mark Addy</a> started the presentation by
covering why we need to look at websockets and data grid solutions
in general.  After all, if what we have today must already work,
why do anything different?  The good news is, we can improve quite
a bit.  Existing mechanisms for delivering (or simulating) real time
data updates between a server and browser with HTTP are inherently
limited.  HTTP is a request-reply protocol, which means it is
a half-duplex connection, like using a walkie-talkie pair for
each connection open between the client and server.  Worse, only
the client can initiate the connection.  In our use case here,
the client is the browser.  Comet Cursor techniques, like polling
or even long-polling doesn&rsquo;t cut it for high concurrency or
high frequency updates.  Streaming over HTTP 1.1 connections is
not (as) memory efficient.</p>

<h2>Enter WebSockets</h2>

<p>WebSockets are available in HTML5 compliant browsers, described
by <a href="https://www.rfc-editor.org/rfc/rfc6455.txt">RFC 6455</a> and in
JEE7 described by <a href="http://jcp.org/aboutJava/communityprocess/final/jsr356/index.html">JSR 356</a>.
WebSockets provide a protocol upgrade path from traditional
HTTP, support full duplex communication (bidirectional
and simultaneous), support path parameters (<em>can you say:
RESTful WebSockets?</em>) and use only 2 bytes overhead per frame.</p>

<h2>JBoss Data Grid</h2>

<p><a href="https://www.redhat.com/products/jbossenterprisemiddleware/data-grid/">JBoss Data Grid</a>
is essentially a caching framework which includes data replication
and (re) distribution functionality.  This means that the sum of the
data included in a JBoss Data Grid cache is equivalent to the number
of elements in the cache multiplied by the number of nodes and divided
by the number of copies of the data between nodes.  Redundancy is
automatic with even data distribution.</p>

<p>For applications, a great feature of Data Grid is that as a
developer, you need not remember which node received data to retrieve
it back again later.  The data grid will note the location of each
entry and automatically retrieve it from any other node as necessary
when requested by an application.  Another is the support for <em>Cache
Events</em>.  Listening to cache events allows and application to take
advice from the cache when elements are changed or written.  For
example, in a dashboard if the source data aggregate changes in
response to a recurring map-reduce job, data could be made available
to dashboard listeners by issuing a push or pull request after
receiving an event notification that the data had changed in the cache.</p>

<p>Currently, JBoss Data Grid can only be used in an embedded mode, as
a java library in an application.  Soon multiple modes will be supported,
such as a client-server mode.  If you are using the new 8.0.0
<a href="http://wildfly.org">WildFly</a> application server then you can use
library mode with JBoss Data Grid right away.</p>

<h2>Optimizing Events</h2>

<p>Since multiple copies of data can exist in a distributed cache,
multiple events occur whenever data is updated as copies are refreshed.
An application most likely does not want to receive the additional
events and almost surely does not want to propogate a data refresh to
a WebSocket client connection if the data has not actually changed from
the first event received.  To resolve this, JBoss application servers
including HornetQ can enable the <em>de-duplication</em> feature on a JMS
Topic, resulting in an automatic purging of the duplicate cache
events as they are published to the topic.</p>

<pre><code>WebSocket Clients ............   *
          /|\
           |   (WebSocket Protocol)
          \|/
Application Message Driven Beans (@ServerEndpoint)
          /|\
           |   (JMS via Subscription)
           |
HornetQ Topic Publisher
  /|\     /|\    /|\
   |       |      |   (Data Grid Cache Events)
   |       |      |
JBoss Data Grid Layer
   |    |    |    |
  |X| .......... |X|  (Data Grid Nodes)
</code></pre>

<p><em>(WWDC Update: New MacBook Air with Haswell and a new MacPro!)</em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Matt Dugan</span></span>

      








  


<time datetime="2013-06-17T09:16:00-04:00" pubdate data-updated="true">Jun 17<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/grid/'>Grid</a>, <a class='category' href='/blog/categories/jboss/'>JBoss</a>, <a class='category' href='/blog/categories/judcon/'>JUDCon</a>, <a class='category' href='/blog/categories/websockets/'>WebSockets</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/06/17/camelone-2013-camel-cookbook/" title="Previous Post: CamelOne 2013: Camel Cookbook">&laquo; CamelOne 2013: Camel Cookbook</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/06/17/rich-web-applications-with-jboss-errai/" title="Next Post: JUDCon 2013: Rich Web Applications with JBoss Errai">JUDCon 2013: Rich Web Applications with JBoss Errai &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/11/red-hat-summit-2013-the-jboss-way/">Red Hat Summit 2013: The JBoss Way</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/11/judcon-2013-resilient-enterprise-messaging-with-fuse-and-red-hat-enterprise-linux/">JUDCon 2013: Resilient Enterprise Messaging With Fuse &amp; Red Hat Enterprise Linux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/25/judcon-2013-so-you-want-to-be-a-jboss-rock-star/">JUDCon 2013: So You Want to Be a JBoss Rock Star</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/25/judcon-2013-building-html5-applications/">JUDCon 2013: Building HTML5 Applications</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/25/judcon-2013-full-control-and-transparency/">JUDCon 2013: Full Control &amp; Transparency</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/18/camelone-2013-making-apache-mq-scale/">CamelOne 2013: Making Apache MQ Scale</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/17/camelone-2013-drools-with-apache-camel-dot-rules/">CamelOne 2013: Drools With Apache Camel.. Rules</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/17/rich-web-applications-with-jboss-errai/">JUDCon 2013: Rich Web Applications With JBoss Errai</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/17/judcon-2013-jboss-grid-and-websockets/">JUDCon 2013: JBoss Data Grid and WebSockets</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/17/camelone-2013-camel-cookbook/">CamelOne 2013: Camel Cookbook</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/11/new-job-slash/">New Job</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mattdugan">@mattdugan</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mattdugan',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/Matt D?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Matt Dugan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>







</body>
</html>
